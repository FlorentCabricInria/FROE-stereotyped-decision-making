<!--
-->

<div id="row">
    <h1>Exit questionnaire</h1>
    <div id="scroll-warning_9" class="alert alert-warning alert-dismissible" hidden>
        <span>Some content may be off-screen. Please scroll down to see the rest of the content.</span>
    </div>
    <p> To end this study, we will ask you to answer 12 questions. These 12 questions have been introduced by social psychologists and have been widely used by scientists. </p>
    <p style="font-size: 1em"><strong>Instructions:</strong>  For each statement, indicate whether you "Strongly Disagree", "Somewhat Disagree", Slightly Disagree",
        "Slightly Agree", "Somewhat Agree", "Strongly Agree" </p>
    <hr style="height: 0.5em; background-color: lightgrey"/>
    <form action="javascript:processScaleResults()">
        <table class="display dataTable no-footer" id="DataTables_Table_0" role="grid">
            <thead>

            <tr role="row">
                <th class="" rowspan="1" style="text-align:center;" colspan="1"> </th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Strongly disagree</th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Somewhat disagree</th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Slightly disagree</th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Slightly agree</th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Somewhat agree</th>
                <th class="sorting_disabled" rowspan="1" style="text-align:center;" colspan="1">Strongly agree</th>
            </tr>
            </thead>
            <tbody>
            <tr style="height:4em;" role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert1">		<td> 1. Many women have a quality of purity that few men possess. </td>
                <td style="text-align:center;"><input type="radio" style="text-align:center;" name="likert1" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert1" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert1" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert1" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert1" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert1" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert2">		<td> 2. Women should be cherished and protected by men. </td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert2" value="5"></td>
            </tr>
            <tr style="height:4em;"role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert3">		<td> 3. Women seek to gain power by getting control over men. </td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert3" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert4">		<td> 4. Every man ought to have a woman whom he adores. </td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert4" value="5"></td>
            </tr>
            <tr style="height:4em;"role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert5">		<td> 5. Men are incomplete without women. </td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert5" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert6">		<td> 6. Women exaggerate problems they have at work. </td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert6" value="5"></td>
            </tr>
            <tr style="height:4em;"role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert7">		<td> 7. Once a woman gets a man to commit to her, she usually tries to put him on a tight leash. </td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert7" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert8">		<td> 8. When women lose to men in a fair competition, they typically complain about being discriminated against. </td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert8" value="5"></td>
            </tr>
            <tr style="height:4em;"role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert9">		<td> 9. Many women get a kick out of teasing men by seeming sexually available and then refusing male advances. </td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert9" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert10">		<td> 10. Women, compared to men, tend to have a superior moral sensibility. </td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert10" value="5"></td>
            </tr>
            <tr style="height:4em;"role="row" class="odd shiny-input-radiogroup shiny-bound-input" id="likert11">		<td> 11. Men should be willing to sacrifice their own well being in order to provide financially for the women in their lives. </td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert11" value="5"></td>
            </tr>
            <tr style="height:4em;background-color: #f9f5f5;"role="row" class="even shiny-input-radiogroup shiny-bound-input" id="likert12">		<td> 12. Feminists are making unreasonable demands of men. </td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="0"></td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="1"></td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="2"></td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="3"></td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="4"></td>
                <td style="text-align:center;"><input type="radio" name="likert12" value="5"></td>
            </tr>

            </tbody>
        </table>
        <div class="buttons" id="buttonForm">
            <button id="submitScaleButton" class="submit">Submit</button> <br>
            <span id="ErrorMessageScale" style="color: darkred"></span>
        </div>
    </form>

    <script type="text/javascript">
      function processScaleResults() {
        console.log("Hey dude, I am in the click")
        let mistakes ="";
        var answ1 = document.querySelector('input[name="likert1"]:checked');
        if(answ1 == null) {
          mistakes += "- 1 ";
          console.log(mistakes)
        }
        else {
          answ1 = parseInt(document.querySelector('input[name="likert1"]:checked').value);

          console.log(answ1)
        }
        var answ2 = document.querySelector('input[name="likert2"]:checked');
        if(answ2 == null) {
          mistakes += "- 2 ";
        }
        else {
          answ2 = parseInt(document.querySelector('input[name="likert2"]:checked').value);
        }
        var answ3 = document.querySelector('input[name="likert3"]:checked');
        if(answ3 == null) {
          mistakes += "- 3 ";
        }
        else {
          answ3 = parseInt(document.querySelector('input[name="likert3"]:checked').value);
        }
        var answ4 = document.querySelector('input[name="likert4"]:checked');
        if(answ4 == null) {
          mistakes += "- 4 ";
        }
        else {
          answ4 = parseInt(document.querySelector('input[name="likert4"]:checked').value);
        }
        var answ5 = document.querySelector('input[name="likert5"]:checked');
        if(answ5 == null) {
          mistakes += "- 5 ";
        }
        else {
          answ5 = parseInt(document.querySelector('input[name="likert5"]:checked').value);
        }
        var answ6 = document.querySelector('input[name="likert6"]:checked');
        if(answ6 == null) {
          mistakes += "- 6";
        }
        else {
          answ6 = parseInt(document.querySelector('input[name="likert6"]:checked').value);
        }
        var answ7 = document.querySelector('input[name="likert7"]:checked');
        if(answ7 == null) {
          mistakes += "- 7";
        }
        else {
          answ7 = parseInt(document.querySelector('input[name="likert7"]:checked').value);
        }
        var answ8 = document.querySelector('input[name="likert8"]:checked');
        if(answ8 == null) {
          mistakes += "- 8";
        }
        else {
          answ8 = parseInt(document.querySelector('input[name="likert8"]:checked').value);
        }
        var answ9 = document.querySelector('input[name="likert9"]:checked');
        if(answ9 == null) {
          mistakes += "- 9";
        }
        else {
          answ9= parseInt(document.querySelector('input[name="likert9"]:checked').value);
        }
        var answ10 = document.querySelector('input[name="likert10"]:checked');
        if(answ10 == null) {
          mistakes += "- 10";
        }
        else {
          answ10= parseInt(document.querySelector('input[name="likert10"]:checked').value);
        }
        var answ11= document.querySelector('input[name="likert11"]:checked');
        if(answ11 == null) {
          mistakes += "- 11";
        }
        else {
          answ11= parseInt(document.querySelector('input[name="likert11"]:checked').value);
        }
        var answ12 = document.querySelector('input[name="likert12"]:checked');
        if(answ12 == null) {
          mistakes += "- 12";
        }
        else {
          answ12= parseInt(document.querySelector('input[name="likert12"]:checked').value);
        }
        if(mistakes == ""){
          console.log("mistage == 0")
          measurements['answ1'] = answ1;
          measurements['answ2'] = answ2;
          measurements['answ3'] = answ3;
          measurements['answ4'] = answ4;
          measurements['answ5'] = answ5;
          measurements['answ6'] = answ6;
          measurements['answ7'] = answ7;
          measurements['answ8'] = answ8;
          measurements['answ9'] = answ9;
          measurements['answ10'] = answ10;
          measurements['answ11'] = answ11;
          measurements['answ12'] = answ12;
          var totalScale = (answ1 + answ2 + answ3 + answ4 + answ5 + answ6 + answ7 + answ8 + answ9 + answ10 + answ11 + answ12) / 12.0
          var hostileSexism = (answ3 + answ6 + answ7 + answ8 + answ9 + answ12) / 6.0
          var benevolentSexism = (answ1 + answ2 + answ4 + answ5 +  answ10 + answ11) / 6.0

          measurements['totalScale'] = totalScale;
          measurements['hostileSexism'] = hostileSexism;
          measurements['benevolentSexism'] = benevolentSexism;
          measurements['lastClick'] = Date.now();
          if (measurements['condition-for-this-participant'] == 'MenLower-NonStereotyped') {
            measurements['color-used'] = 'non-stereotyped';
            measurements['pay-gap-direction'] = 'men-lower';
          }
            else if (measurements['condition-for-this-participant'] ==  'WomenLower-NonStereotyped') {
              measurements['color-used'] = 'non-stereotyped';
              measurements['pay-gap-direction'] = 'women-lower';
        }
         else if (measurements['condition-for-this-participant'] ==  'MenLower-Stereotyped') {
            measurements['color-used'] = 'stereotyped';
            measurements['pay-gap-direction'] = 'men-lower';
          }
           else if (measurements['condition-for-this-participant'] ==  'WomenLower-Stereotyped'){
              measurements['color-used'] = 'stereotyped';
              measurements['pay-gap-direction'] = 'women-lower';
          }
          console.log("Color used: " + measurements['color-used'] + " and PG direction " + measurements['pay-gap-direction'])
          document.getElementById("ErrorMessageScale").innerHTML = "";
          document.getElementById("buttonForm").style.display ="none";
          document.getElementById("submitScaleButton").hidden = true;
          document.getElementById('btn_ambivalent-sexism-theory_10').hidden = true;

          document.getElementById('ambivalent-sexism-theory_10').hidden = true;
          document.getElementById('end_11').style.display = null;
          document.getElementById('btn_end_11').hidden = true;

          if (is_debug) console.log("Event: finished. Triggering log file save.");
          if ('save_trial_log' in config){
            if(config.save_trial_log){
              if (!excluded) {
                $.ajax({
                  url: 'html/ajax/trial_log.php',
                  type: 'POST',
                  data: JSON.stringify(measurements),
                  contentType: 'application/json',
                  success: function (data) {
                    console.log("Experiment finished BKBLBFJGLDFK.");
                    console.log(measurements['condition']);
                    $(":button").hide();
                    window.onbeforeunload = null;
                  }
                });
              }
            }
          }
          if (!excluded) {
            $.ajax({
              url: 'html/ajax/results.php',
              type: 'POST',
              data: JSON.stringify(measurements),
              contentType: 'application/json',
              success: function (data) {
                console.log("Experiment finished. HELLO");
                console.log(data);
                $(":button").hide();
                window.onbeforeunload = null;
              }
            });
          }

        }
        else {
          console.log('eles')
          document.getElementById("ErrorMessageScale").innerHTML = "You forget to answer questions : " + mistakes + "<br>" + "Please, reply to all questions before proceed to the next stage";
        }
        /*  console.log("You forgot to input answers : " + mistakes)


        console.log(measurements);*/

        /*Scoring:
    Hostile Sexism = average of items 3, 6, 7, 8, 9, 12
    Benevolent Sexism = average of items 1, 2, 4, 5, 10, 11.*/
      }
      // make button active as soon as value was changed

      /* $('body').on('next', function(e, type){
         // console.log("next");
         if (type === '<?php echo $id;?>'){
           measurements['effectiveness'] = effective_answer;
           measurements['illness_reduction'] = illness_answer;
           console.log("logging effectiveness answer " + effective_answer);
           console.log("logging illness reduction answer " + illness_answer);
           console.log("excluded " + excluded);
         }
       });*/

    </script>
</div>
